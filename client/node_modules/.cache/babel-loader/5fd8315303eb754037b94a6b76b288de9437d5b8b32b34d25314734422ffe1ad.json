{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\laris\\\\p\\\\ecommerce-mern-tutorial\\\\client\\\\src\\\\pages\\\\checkout\\\\index.tsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState } from \"react\";\nimport { ShopContext } from \"../../context/shop-context\";\nimport { CartItem } from \"./cart-item\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./styles.css\";\nimport { useGetProducts } from \"../../hooks/useGetProducts\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CheckoutPage = () => {\n  _s();\n  const {\n    getCartItemCount,\n    getTotalCartAmount,\n    checkout\n  } = useContext(ShopContext);\n  const totalAmount = getTotalCartAmount();\n  const {\n    products\n  } = useGetProducts();\n  const navigate = useNavigate();\n  const [showPopup, setShowPopup] = useState(false);\n  const handleCheckout = async () => {\n    const userID = localStorage.getItem(\"userID\");\n    if (userID) {\n      try {\n        await checkout(userID);\n        setShowPopup(true); // Afiseaza popup-ul dupa finalizarea checkout-ului\n      } catch (error) {\n        console.error(\"Checkout failed:\", error);\n        // Gestionați orice erori aici, dacă este necesar\n      }\n    }\n  };\n\n  const finalizeCheckout = () => {\n    // Golește coșul\n    setShowPopup(false); // Ascunde popup-ul\n    navigate(\"/\"); // Navighează înapoi la pagina principală\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cart\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Your Cart Items\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-items\",\n      children: products.map(product => {\n        if (getCartItemCount(product._id) !== 0) {\n          return /*#__PURE__*/_jsxDEV(CartItem, {\n            data: product\n          }, product._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 20\n          }, this);\n        }\n        return null;\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this), totalAmount > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"checkout\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Subtotal: $\", totalAmount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate(\"/\"),\n        children: \"Continue Shopping\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleCheckout,\n        children: \"Checkout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Your Shopping Cart is Empty\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this), showPopup && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"popup\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"popup-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Order Confirmation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Your order has been placed successfully!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: finalizeCheckout,\n          children: \"OK\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n};\n_s(CheckoutPage, \"soyuJoFDyHqZuOEyjDj4KPBhF9U=\", false, function () {\n  return [useGetProducts, useNavigate];\n});\n_c = CheckoutPage;\nvar _c;\n$RefreshReg$(_c, \"CheckoutPage\");","map":{"version":3,"names":["React","useContext","useState","ShopContext","CartItem","useNavigate","useGetProducts","jsxDEV","_jsxDEV","CheckoutPage","_s","getCartItemCount","getTotalCartAmount","checkout","totalAmount","products","navigate","showPopup","setShowPopup","handleCheckout","userID","localStorage","getItem","error","console","finalizeCheckout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","product","_id","data","onClick","_c","$RefreshReg$"],"sources":["C:/Users/laris/p/ecommerce-mern-tutorial/client/src/pages/checkout/index.tsx"],"sourcesContent":["import React, { useContext, useState } from \"react\";\r\nimport { ShopContext } from \"../../context/shop-context\";\r\nimport { CartItem } from \"./cart-item\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport \"./styles.css\";\r\nimport { useGetProducts } from \"../../hooks/useGetProducts\";\r\nimport { IProduct } from \"../../models/interfaces\";\r\n\r\nexport const CheckoutPage = () => {\r\n  const { getCartItemCount, getTotalCartAmount, checkout } =\r\n    useContext(ShopContext);\r\n  const totalAmount = getTotalCartAmount();\r\n  const { products } = useGetProducts();\r\n  const navigate = useNavigate();\r\n\r\n  const [showPopup, setShowPopup] = useState(false);\r\n\r\n  const handleCheckout = async () => {\r\n    const userID = localStorage.getItem(\"userID\");\r\n    if (userID) {\r\n      try {\r\n        await checkout(userID);\r\n        setShowPopup(true);  // Afiseaza popup-ul dupa finalizarea checkout-ului\r\n      } catch (error) {\r\n        console.error(\"Checkout failed:\", error);\r\n        // Gestionați orice erori aici, dacă este necesar\r\n      }\r\n    }\r\n  };\r\n\r\n  const finalizeCheckout = () => {\r\n    // Golește coșul\r\n    setShowPopup(false);  // Ascunde popup-ul\r\n    navigate(\"/\");  // Navighează înapoi la pagina principală\r\n  };\r\n\r\n  return (\r\n    <div className=\"cart\">\r\n      <h1>Your Cart Items</h1>\r\n      <div className=\"cart-items\">\r\n        {products.map((product: IProduct) => {\r\n          if (getCartItemCount(product._id) !== 0) {\r\n            return <CartItem key={product._id} data={product} />;\r\n          }\r\n          return null;\r\n        })}\r\n      </div>\r\n      {totalAmount > 0 ? (\r\n        <div className=\"checkout\">\r\n          <p>Subtotal: ${totalAmount}</p>\r\n          <button onClick={() => navigate(\"/\")}>Continue Shopping</button>\r\n          <button onClick={handleCheckout}>Checkout</button>\r\n        </div>\r\n      ) : (\r\n        <h1>Your Shopping Cart is Empty</h1>\r\n      )}\r\n      {showPopup && (\r\n        <div className=\"popup\">\r\n          <div className=\"popup-content\">\r\n            <h2>Order Confirmation</h2>\r\n            <p>Your order has been placed successfully!</p>\r\n            <button onClick={finalizeCheckout}>OK</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AACnD,SAASC,WAAW,QAAQ,4BAA4B;AACxD,SAASC,QAAQ,QAAQ,aAAa;AACtC,SAASC,WAAW,QAAQ,kBAAkB;AAE9C,OAAO,cAAc;AACrB,SAASC,cAAc,QAAQ,4BAA4B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAG5D,OAAO,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAChC,MAAM;IAAEC,gBAAgB;IAAEC,kBAAkB;IAAEC;EAAS,CAAC,GACtDZ,UAAU,CAACE,WAAW,CAAC;EACzB,MAAMW,WAAW,GAAGF,kBAAkB,CAAC,CAAC;EACxC,MAAM;IAAEG;EAAS,CAAC,GAAGT,cAAc,CAAC,CAAC;EACrC,MAAMU,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAE9B,MAAM,CAACY,SAAS,EAAEC,YAAY,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EAEjD,MAAMiB,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,MAAMC,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;IAC7C,IAAIF,MAAM,EAAE;MACV,IAAI;QACF,MAAMP,QAAQ,CAACO,MAAM,CAAC;QACtBF,YAAY,CAAC,IAAI,CAAC,CAAC,CAAE;MACvB,CAAC,CAAC,OAAOK,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;QACxC;MACF;IACF;EACF,CAAC;;EAED,MAAME,gBAAgB,GAAGA,CAAA,KAAM;IAC7B;IACAP,YAAY,CAAC,KAAK,CAAC,CAAC,CAAE;IACtBF,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAE;EAClB,CAAC;;EAED,oBACER,OAAA;IAAKkB,SAAS,EAAC,MAAM;IAAAC,QAAA,gBACnBnB,OAAA;MAAAmB,QAAA,EAAI;IAAe;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACxBvB,OAAA;MAAKkB,SAAS,EAAC,YAAY;MAAAC,QAAA,EACxBZ,QAAQ,CAACiB,GAAG,CAAEC,OAAiB,IAAK;QACnC,IAAItB,gBAAgB,CAACsB,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC,EAAE;UACvC,oBAAO1B,OAAA,CAACJ,QAAQ;YAAmB+B,IAAI,EAAEF;UAAQ,GAA3BA,OAAO,CAACC,GAAG;YAAAN,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAkB,CAAC;QACtD;QACA,OAAO,IAAI;MACb,CAAC;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,EACLjB,WAAW,GAAG,CAAC,gBACdN,OAAA;MAAKkB,SAAS,EAAC,UAAU;MAAAC,QAAA,gBACvBnB,OAAA;QAAAmB,QAAA,GAAG,aAAW,EAACb,WAAW;MAAA;QAAAc,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC/BvB,OAAA;QAAQ4B,OAAO,EAAEA,CAAA,KAAMpB,QAAQ,CAAC,GAAG,CAAE;QAAAW,QAAA,EAAC;MAAiB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAChEvB,OAAA;QAAQ4B,OAAO,EAAEjB,cAAe;QAAAQ,QAAA,EAAC;MAAQ;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC/C,CAAC,gBAENvB,OAAA;MAAAmB,QAAA,EAAI;IAA2B;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CACpC,EACAd,SAAS,iBACRT,OAAA;MAAKkB,SAAS,EAAC,OAAO;MAAAC,QAAA,eACpBnB,OAAA;QAAKkB,SAAS,EAAC,eAAe;QAAAC,QAAA,gBAC5BnB,OAAA;UAAAmB,QAAA,EAAI;QAAkB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC3BvB,OAAA;UAAAmB,QAAA,EAAG;QAAwC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eAC/CvB,OAAA;UAAQ4B,OAAO,EAAEX,gBAAiB;UAAAE,QAAA,EAAC;QAAE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3C;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAACrB,EAAA,CA3DWD,YAAY;EAAA,QAIFH,cAAc,EAClBD,WAAW;AAAA;AAAAgC,EAAA,GALjB5B,YAAY;AAAA,IAAA4B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}